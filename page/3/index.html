<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"l4qiang.me","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="记录点滴，注重积累。">
<meta property="og:type" content="website">
<meta property="og:title" content="CrazyAirhead">
<meta property="og:url" content="http://l4qiang.me/page/3/index.html">
<meta property="og:site_name" content="CrazyAirhead">
<meta property="og:description" content="记录点滴，注重积累。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="L4qiang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://l4qiang.me/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>CrazyAirhead</title>
  


  <script data-pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3e0344e2cb00f51bf76efa000dca7d75";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">CrazyAirhead</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">疯狂的傻瓜，傻瓜也疯狂——傻方能执著，疯狂才专注!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/crazy-airhead" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/11/21/go/go-plugin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/21/go/go-plugin/" class="post-title-link" itemprop="url">go-plugin教程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-21 15:26:32 / 修改时间：15:30:23" itemprop="dateCreated datePublished" datetime="2022-11-21T15:26:32+08:00">2022-11-21</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>20k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>18 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://cheppers.com/post/hashicorps-go-plugin-extensive-tutorial/">原文 HashiCorp’s go-plugin extensive tutorial</a></p>
<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>If you don’t know what go-plugin is, don’t worry, here is a small introduction on the subject matter:</p>
<p>Back in the old days when Go didn’t have the <code>plugin</code> package, HashiCorp was desperately looking for a way to use plugins.</p>
<p>In the old days, Lua plus Go wasn’t really a thing yet, and to be honest, nobody wants to write Lua ( joking!).</p>
<p>And thus Mitchell had this brilliant idea of using RPC over the local network to serve a local interface as something that could easily be implemented with any other language that supported RPC. This sounds convoluted but has many benefits! For example, your code will never crash because of a plugin and the ability to use any language to implement a plugin. Not just Go.</p>
<p>It has been a battle-hardened solution for years now and is being actively used by Terraform, Vault, Consule, and especially Packer. All using go-plugin in order to provide a much needed flexibility. Writing a plugin is easy. Or so they say.</p>
<p>It can get complicated quickly, for example, if you are trying to use GRPC. You can lose sight of what exactly you’ll need to implement, where and why; or utilizing various languages or using go-plugins in your own project and extending your CLI with pluggable components.</p>
<p>These are all nothing to sneeze at. Suddenly you’ll find yourself with hundreds of lines of code pasted from various examples and yet nothing works. Or worse, it DOES work but you have no idea how. Then you find yourself needing to extend it with a new capability, or you find an elusive bug and can’t trace its origins.</p>
<p>Fear not. I’ll try to demystify things and draw a clear picture about how it works and how the pieces fit together.</p>
<p>Let’s start at the beginning.</p>
<h2 id="Basic-plugin"><a href="#Basic-plugin" class="headerlink" title="Basic plugin"></a>Basic plugin</h2><p>Let’s start by writing a simple Go GRPC plugin. In fact, we can go through the basic example in the go-plugin’s repository which can be quite confusing when first starting out. We’ll go step-by-step, and the switch to GRPC will be much easier!</p>
<h2 id="Basic-concepts"><a href="#Basic-concepts" class="headerlink" title="Basic concepts"></a>Basic concepts</h2><h3 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h3><p>In the case of plugins, the Server is the one serving the plugin’s implementation. This means the server will have to provide the implementation to an interface.</p>
<h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><p>The Client calls the server in order to execute the desired behavior. The underlying logic will connect to the server running on localhost on a random higher port, call the wanted function’s implementation and wait for a response. Once the response is received provide that back to the calling Client.</p>
<h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><h3 id="The-main-function"><a href="#The-main-function" class="headerlink" title="The main function"></a>The main function</h3><h4 id="Logger"><a href="#Logger" class="headerlink" title="Logger"></a>Logger</h4><p>The plugins defined here use stdout in a special way. If you aren’t writing a Go based plugin, you will have to do that yourself by outputting something like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1|1|tcp|127.0.0.1:1234|grpc </span><br></pre></td></tr></table></figure>

<p>We’ll come back to this later. Suffice to say the framework will pick this up and will connect to the plugin based on the output. In order to get some output back, we must define a special logger:</p>
<p> <code>// Create an hclog.Logger logger := hclog.New(&amp;hclog.LoggerOptions&#123;     Name:   &quot;plugin&quot;,     Output: os.Stdout,     Level:  hclog.Debug, &#125;)</code> </p>
<h4 id="NewClient"><a href="#NewClient" class="headerlink" title="NewClient"></a>NewClient</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> // We&#x27;re a host! Start by launching the plugin process. client := plugin.NewClient(&amp;plugin.ClientConfig&#123;</span><br><span class="line">    HandshakeConfig: handshakeConfig,</span><br><span class="line">    Plugins:         pluginMap,</span><br><span class="line">    Cmd:             exec.Command(&quot;./plugin/greeter&quot;),</span><br><span class="line">    Logger:          logger,</span><br><span class="line">&#125;) defer client.Kill() </span><br></pre></td></tr></table></figure>

<p>What is happening here? Let’s see one by one: <strong>HandshakeConfig: handshakeConfig</strong>: This part is the handshake configuration of the plugin. It has a nice comment as well.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // handshakeConfigs are used to just do a basic handshake between // a plugin and host. If the handshake fails, a user friendly error is shown. // This prevents users from executing bad plugins or executing a plugin // directory. It is a UX feature, not a security feature. var handshakeConfig = plugin.HandshakeConfig&#123;</span><br><span class="line">    ProtocolVersion:  1,</span><br><span class="line">    MagicCookieKey:   &quot;BASIC_PLUGIN&quot;,</span><br><span class="line">    MagicCookieValue: &quot;hello&quot;,</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>The <strong>ProtocolVersion</strong> here is used in order to maintain compatibility with your current plugin versions. It’s basically like an API version. If you increase this, you will have two options. Don’t accept lower protocol versions nor switch to the version number and use a different client implementation for a lower version than for a higher version. This way you will maintain backwards compatibility. The <strong>MagicCookieKey</strong> and <strong>MagicCookieValue</strong> are used for a basic handshake which the comment is talking about. You have to set this <strong>ONCE</strong> for your application. Never change it again, for if you do, your plugins will no longer work. For uniqueness sake, I suggest using UUID. <strong>Cmd</strong> is one of the most important parts about a plugin. Basically how plugins work is that they boil down to a compiled binary which is executed and starts an RPC server. This is where you will have to define the binary which will be executed and does all this. Since this is all happening locally, (please keep in mind that Go-plugins only support localhost, and for a good reason), these binaries will most likely sit next to your application’s binary or in a pre-configured global location. Something like: <code>~/.config/my-app/plugins</code>. This is individual for each plugin of course. The plugins can be autoloaded via a discovery function given a path and a glob. And last but not least is the <code>Plugins</code> map. This map is used in order to identify a plugin called <code>Dispense</code>. This map is globally available and must stay consistent in order for all the plugins to work:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// pluginMap is the map of plugins we can dispense. var pluginMap = map[string]plugin.Pluglin   &quot;greeter&quot;: &amp;example.GreeterPlugin&#123;&#125;, &#125; </span><br></pre></td></tr></table></figure>

<p>You can see that the key is the name of the plugin and the value is the plugin. We then proceed to create an RPC client:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> // Connect via RPC rpcClient, err := client.Client() if err != nil &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>Nothing fancy about this one… Now comes the interesting part:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> // Request the plugin raw, err := rpcClient.Dispense(&quot;greeter&quot;) if err != nil &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>What’s happening here? Dispense will look in the above created map and search for the plugin. If it cannot find it, it will throw an error at us. If it does find it, it will cast this plugin to an RPC or a GRPC type plugin. Then proceed to create an RPC or a GRPC client out of it. There is no call yet. This is just creating a client and parsing it to a respective representation. Now comes the magic:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// We should have a Greeter now! This feels like a normal interface // implementation but is in fact over an RPC connection. greeter := raw.(example.Greeter) fmt.Println(greeter.Greet()) </span><br></pre></td></tr></table></figure>

<p>Here we are type asserting our raw GRPC client into our own plugin type. This is so we can call the respective function on the plugin! Once that’s done we will have a {client,struct,implementation} that can be called like a simple function. The implementation right now comes from greeter_impl.go, but that will change once protoc makes an appearance. Behind the scenes, go-plugin will do a bunch of hat tricks with multiplexing TCP connections as well as a remote procedure call to our plugin. Our plugin then will run the function, generate some kind of output, and will then send that back for the waiting client. The client will then proceed to parse the message into a given response type and will then return it back to the client’s callee. This concludes main.go for now.</p>
<h3 id="The-Interface"><a href="#The-Interface" class="headerlink" title="The Interface"></a>The Interface</h3><p>Now let’s investigate the Interface. The interface is used to provide calling details. This interface will be what defines our plugins’ capabilities. How does our look like?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> // Greeter is the interface that we&#x27;re exposing as a plugin. type Greeter interface &#123;</span><br><span class="line">    Greet() string</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>This is pretty simple. It defines a function which will return a string typed value. Now, we will need a couple of things for this to work. Firstly we need something which defines the RPC workings. go-plugin is working with <code>net/http</code> inside. It also uses something called Yamux for connection multiplexing, but we needn’t worry about this detail. Implementing the RPC details looks like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> // Here is an implementation that talks over RPC type GreeterRPC struct &#123;</span><br><span class="line">    client *rpc.Client</span><br><span class="line">&#125;</span><br><span class="line">func (g *GreeterRPC) Greet() string &#123;</span><br><span class="line">    var resp string</span><br><span class="line">    err := g.client.Call(&quot;Plugin.Greet&quot;, new(interface&#123;&#125;), &amp;resp)</span><br><span class="line">    if err != nil &#123;</span><br><span class="line">        // You usually want your interfaces to return errors. If they don&#x27;t,</span><br><span class="line">        // there isn&#x27;t much other choice here.</span><br><span class="line">        panic(err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return resp</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>Here the GreeterRPC struct is an RPC specific implementation that will handle communication over RPC. This is Client in this setup. In case of gRPC, this would look something like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // GRPCClient is an implementation of KV that talks over RPC. type GreeterGRPC struct&#123; client proto.GreeterClient &#125;</span><br><span class="line">func (m *GreeterGRPC) Greet() (string, error) &#123;</span><br><span class="line">    s, err := m.client.Greet(context.Background(), &amp;proto.Empty&#123;&#125;)</span><br><span class="line">    return s, err</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>What is happening here? What’s Proto and what is GreeterClient? GRPC uses Google’s protoc library to serialize and unserialize data.<code>proto.GreeterClient</code> is generated Go code by protoc. This code is a skeleton for which implementation detail will be replaced on run time. Well, the actual result will be used and not replaced as such. Back to our previous example. The RPC client calls a specific Plugin function called Greet for which the implementation will be provided by a Server that will be streamed back over the RPC protocol. The server is pretty easy to follow:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> // Here is the RPC server that GreeterRPC talks to, conforming to // the requirements of net/rpc type GreeterRPCServer struct &#123;</span><br><span class="line">    // This is the real implementation</span><br><span class="line">    Impl Greeter</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>Impl is the concrete implementation that will be called in the Server’s implementation of the Greet plugin. Now we must define Greet on the RPCServer in order for it to be able to call the remote code. This looks like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> func (s *GreeterRPCServer) Greet(args interface&#123;&#125;, resp *string) error &#123;</span><br><span class="line">    *resp = s.Impl.Greet()</span><br><span class="line">    return nil</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>This is all still boilerplate for the RPC works. Now comes plugin. For this, the comment is actually quite good too:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> // This is the implementation of plugin.Plugin so we can serve/consume this // // This has two methods: Server must return an RPC server for this plugin // type. We construct a GreeterRPCServer for this. // // Client must return an implementation of our interface that communicates // over an RPC client. We return GreeterRPC for this. // // Ignore MuxBroker. That is used to create more multiplexed streams on our // plugin connection and is a more advanced use case. type GreeterPlugin struct &#123;</span><br><span class="line">    // Impl Injection</span><br><span class="line">    Impl Greeter</span><br><span class="line">&#125;</span><br><span class="line">func (p *GreeterPlugin) Server(*plugin.MuxBroker) (interface&#123;&#125;, error) &#123;</span><br><span class="line">    return &amp;GreeterRPCServer&#123;Impl: p.Impl&#125;, nil</span><br><span class="line">&#125;</span><br><span class="line">func (GreeterPlugin) Client(b *plugin.MuxBroker, c *rpc.Client) (interface&#123;&#125;, error) &#123;</span><br><span class="line">    return &amp;GreeterRPC&#123;client: c&#125;, nil</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>What does this mean? So, remember: <code>GreeterRPCServer</code> is the one calling the actual implementation while Client is receiving the result of that call. The <code>GreeterPlugin</code> has the <code>Greeter</code> interface embedded just like the <code>RPCServer</code>. We will use the <code>GreeterPlugin</code> as a struct in the plugin map. This is the plugin that we will actually use. This is all still common stuff. These things will need to be visible for both. The plugin’s implementation will use the interface to see what it needs to implement. The Client will use it see what to call and what API is available. Like, <code>Greet</code>. How does the implementation look like?</p>
<h3 id="The-Implementation"><a href="#The-Implementation" class="headerlink" title="The Implementation"></a>The Implementation</h3><p>In a completely separate package, but which still has access to the interface definition, this plugin could be something like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> // Here is a real implementation of Greeter type GreeterHello struct &#123;</span><br><span class="line">    logger hclog.Logger</span><br><span class="line">&#125;</span><br><span class="line">func (g *GreeterHello) Greet() string &#123;</span><br><span class="line">    g.logger.Debug(&quot;message from GreeterHello.Greet&quot;)</span><br><span class="line">    return &quot;Hello!&quot;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>We create a struct and then add the function to it which is defined by the plugin’s interface. This interface, since it’s required by both parties, could well sit in a common package outside of both programs. Something like a SDK. Both code could import it and use it as a common dependency. This way we have separated the interface from the plugin <strong>and</strong> the calling client. The <code>main</code> function could look something like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> logger := hclog.New(&amp;hclog.LoggerOptions&#123;</span><br><span class="line">    Level:      hclog.Trace,</span><br><span class="line">    Output:     os.Stderr,</span><br><span class="line">    JSONFormat: true,</span><br><span class="line">&#125;)</span><br><span class="line">greeter := &amp;GreeterHello&#123;</span><br><span class="line">    logger: logger,</span><br><span class="line">&#125; // pluginMap is the map of plugins we can dispense. var pluginMap = map[string]plugin.Plugin&#123;</span><br><span class="line">    &quot;greeter&quot;: &amp;example.GreeterPlugin&#123;Impl: greeter&#125;,</span><br><span class="line">&#125;</span><br><span class="line">logger.Debug(&quot;message from plugin&quot;, &quot;foo&quot;, &quot;bar&quot;)</span><br><span class="line">plugin.Serve(&amp;plugin.ServeConfig&#123;</span><br><span class="line">    HandshakeConfig: handshakeConfig,</span><br><span class="line">    Plugins:         pluginMap,</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<p>Notice two things that we need. One is the <code>handshakeConfig</code>. You can either define it here, with the same cookie details as you defined in the client code, or you can extract the handshake information into the SDK. This is up to you. Then the next interesting thing is the <code>plugin.Serve</code> method. This is where the magic happens. The plugins open up a RPC communication socket and over a hijacked <code>stdout</code>, broadcasts its availability to the calling Client in this format:</p>
<p> <code>CORE-PROTOCOL-VERSION | APP-PROTOCOL-VERSION | NETWORK-TYPE | NETWORK-ADDR | PROTOCOL</code> </p>
<p>For Go plugins, you don’t have to concern yourself with this. <code>go-plugin</code> takes care of all this for you. For non-Go versions, we must take this into account. And before calling serve, we need to output this information to <code>stdout</code>. For example, a Python plugin must deal with this himself. Like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Output information print(&quot;1|1|tcp|127.0.0.1:1234|grpc&quot;) sys.stdout.flush() </span><br></pre></td></tr></table></figure>

<p>For GRPC plugins, it’s also mandatory to implement a HealthChecker. How would all this look like with GRPC? It gets slightly more complicated but not too much. We need to use <code>protoc</code> to create a protocol description for our implementation, and then we will call that. Let’s look at this now by converting the basic greeter example into GRPC.</p>
<h1 id="GRPC-Basic-plugin"><a href="#GRPC-Basic-plugin" class="headerlink" title="GRPC Basic plugin"></a>GRPC Basic plugin</h1><p>The example that’s under GRPC is quite elaborate and perhaps you don’t need the Python part. I will focus on the basic RPC example into a GRPC example. That should not be a problem.</p>
<h2 id="The-API"><a href="#The-API" class="headerlink" title="The API"></a>The API</h2><p>First and foremost, you will need to define an API to implement with <code>protoc</code>. For our basic example, the protoc file could look like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> syntax = &quot;proto3&quot;; package proto;</span><br><span class="line">message GreetResponse &#123;</span><br><span class="line">    string message = 1;</span><br><span class="line">&#125;</span><br><span class="line">message Empty &#123;&#125;</span><br><span class="line">service GreeterService &#123;</span><br><span class="line">    rpc Greet(Empty) returns (GreetResponse);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>The syntax is quite simple and readable. What this defines is a message, which is a response, that will contain a <code>message</code> with the type <code>string</code>. The <code>service</code> defines a service which has a method called <code>Greet</code>. The service definition is basically an interface for which we will be providing the concrete implementation through the plugin. To read more about protoc, visit this page: <a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/">Google Protocol Buffer</a>.</p>
<h2 id="Generate-the-code"><a href="#Generate-the-code" class="headerlink" title="Generate the code"></a>Generate the code</h2><p>Now, with the protoc definition in hand, we need to generate the stubs that the local client implementation can call. That client call will then, through the remote procedure call, call the right function on the server which will have the concrete implementation at the ready. Run it and return the result in the specified format. Because the stub needs to be available by both parties, (the client AND the server), this needs to live in a shared location. Why? Because the client is calling the stub and the server is implementing the stub. Both need it in order to know what to call/implement. To generate the code, run this command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc -I proto/ proto/greeter.proto --go_out=plugins=grpc:proto </span><br></pre></td></tr></table></figure>

<p>I encourage you to read the generated code. Much will make little sense at first. It will have a bunch of structs and defined things that the GRPC package will use in order to server the function. The interesting bits and pieces are:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> func (m *GreetResponse) GetMessage() string &#123;</span><br><span class="line">    if m != nil &#123;</span><br><span class="line">        return m.Message</span><br><span class="line">    &#125;</span><br><span class="line">    return &quot;&quot;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>Which will get use the message inside the response.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> type GreeterServiceClient interface &#123;</span><br><span class="line">    Greet(ctx context.Context, in *Empty, opts ...grpc.CallOption) (*GreetResponse, error)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>This is our ServiceClient interface which defines the Greet function’s topology. And lastly, this guy:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> func RegisterGreeterServiceServer(s *grpc.Server, srv GreeterServiceServer) &#123;</span><br><span class="line">    s.RegisterService(&amp;_GreeterService_serviceDesc, srv)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>Which we will need in order to register our implementation for the server. We can ignore the rest. ## The interface Much like the RPC, we need to define an interface for the client and server to use. This must be in a shared place as both the server and the client need to know about it. You could put this into an SDK and your peers could just get the SDK and implement some function for define and done. The interface definition in the GRPC land could look something like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> // Greeter is the interface that we&#x27;re exposing as a plugin. type Greeter interface &#123;</span><br><span class="line">    Greet() string</span><br><span class="line">&#125;</span><br><span class="line">// This is the implementation of plugin.GRPCPlugin so we can serve/consume this. type GreeterGRPCPlugin struct &#123;</span><br><span class="line">    // GRPCPlugin must still implement the Plugin interface</span><br><span class="line">    plugin.Plugin</span><br><span class="line">    // Concrete implementation, written in Go. This is only used for plugins</span><br><span class="line">    // that are written in Go.</span><br><span class="line">    Impl Greeter</span><br><span class="line">&#125;</span><br><span class="line">func (p *GreeterGRPCPlugin) GRPCServer(broker *plugin.GRPCBroker, s *grpc.Server) error &#123;</span><br><span class="line">    proto.RegisterGreeterServer(s, &amp;GRPCServer&#123;Impl: p.Impl&#125;)</span><br><span class="line">    return nil</span><br><span class="line">&#125;</span><br><span class="line">func (p *GreeterGRPCPlugin) GRPCClient(ctx context.Context, broker *plugin.GRPCBroker, c *grpc.ClientConn) (interface&#123;&#125;, error) &#123;</span><br><span class="line">    return &amp;GRPCClient&#123;client: proto.NewGreeterClient(c)&#125;, nil</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>With this we have the Plugin’s implementation for hashicorp what needed to be done. The plugin will call the underlying implementation and serve/consume the plugin. We can now write the GRPC part of it. Please note that <code>proto</code> is a shared library too where the protocol stubs reside. That needs to be somewhere on the path or in a separate SDK of some sort, but it must be visible.</p>
<h2 id="Writing-the-GRPC-Client"><a href="#Writing-the-GRPC-Client" class="headerlink" title="Writing the GRPC Client"></a>Writing the GRPC Client</h2><p>Firstly we define the grpc client struct:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// GRPCClient is an implementation of Greeter that talks over RPC. type GRPCClient struct&#123; client proto.GreeterClient &#125; </span><br></pre></td></tr></table></figure>

<p>Then we define how the client will call the remote function:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> func (m *GRPCClient) Greet() string &#123;</span><br><span class="line">    ret, _ := m.client.Greet(context.Background(), &amp;proto.Empty&#123;&#125;)</span><br><span class="line">    return ret.Message</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>This will take the <code>client</code> in the <code>GRPCClient</code> and will call the method on it. Once that’s done we will return to the result <code>Message</code> property which will be <code>Hello!</code>. <code>proto.Empty</code> is an empty struct; we use this if there is no parameter for a defined method or no return value. We can’t just leave it blank. <code>protoc</code> needs to be told explicitly that there is no parameter or return value.</p>
<h2 id="Writing-the-GRPC-Server"><a href="#Writing-the-GRPC-Server" class="headerlink" title="Writing the GRPC Server"></a>Writing the GRPC Server</h2><p>The server implementation will also be similar. We call <code>Impl</code> here which will have our concrete plugin implementation.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> // Here is the gRPC server that GRPCClient talks to. type GRPCServer struct &#123;</span><br><span class="line">    // This is the real implementation</span><br><span class="line">    Impl Greeter</span><br><span class="line">&#125;</span><br><span class="line">func (m *GRPCServer) Greet(</span><br><span class="line">    ctx context.Context,</span><br><span class="line">    req *proto.Empty) *proto.GreeterResponse &#123;</span><br><span class="line">    v := m.Impl.Greet()</span><br><span class="line">    return &amp;proto.GreeterResponse&#123;Message: v&#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>And we will use the <code>protoc</code> defined message response. <code>v</code> will have the response from <code>Greet</code> which will be <code>Hello!</code> provided by the concrete plugin’s implementation. We then transform that into a protoc type by setting the <code>Message</code> property on the <code>GreeterResponse</code> struct provided by the automatically generated protoc stub code. Easy, right?</p>
<h2 id="Writing-the-plugin-itself"><a href="#Writing-the-plugin-itself" class="headerlink" title="Writing the plugin itself"></a>Writing the plugin itself</h2><p>The whole thing looks much like the RPC implementation with just a few small modifications and changes. This can sit completely outside of everything, or can even be provided by a third party implementor.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> // Here is a real implementation of KV that writes to a local file with // the key name and the contents are the value of the key. type Greeter struct&#123;&#125;</span><br><span class="line">func (Greeter) Greet() error &#123;</span><br><span class="line">    return &quot;Hello!&quot;</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">    plugin.Serve(&amp;plugin.ServeConfig&#123;</span><br><span class="line">        HandshakeConfig: shared.Handshake,</span><br><span class="line">        Plugins: map[string]plugin.Plugin&#123;</span><br><span class="line">            &quot;greeter&quot;: &amp;shared.GreeterGRPCPlugin&#123;Impl: &amp;Greeter&#123;&#125;&#125;,</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        // A non-nil value here enables gRPC serving for this plugin...</span><br><span class="line">        GRPCServer: plugin.DefaultGRPCServer,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="Calling-it-all-in-the-main"><a href="#Calling-it-all-in-the-main" class="headerlink" title="Calling it all in the main"></a>Calling it all in the main</h2><p>Once all that is done, the <code>main</code> function looks the same as RPC’s main but with some small modifications.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> // We&#x27;re a host. Start by launching the plugin process. client := plugin.NewClient(&amp;plugin.ClientConfig&#123;</span><br><span class="line">    HandshakeConfig: shared.Handshake,</span><br><span class="line">    Plugins:         shared.PluginMap,</span><br><span class="line">    Cmd:             exec.Command(&quot;./plugin/greeter&quot;),</span><br><span class="line">    AllowedProtocols: []plugin.Protocol&#123;plugin.ProtocolGRPC&#125;,</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<p>The <code>NewClient</code> now defines <code>AllowedProtocols</code> to be <code>ProtocolGRPC</code>. The rest is the same as before calling <code>Dispense</code> and value hinting the plugin to the correct type then calling <code>Greet()</code>.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This is it. We made it! Now our plugin works over GRPC with a defined API by protoc. The plugin’s implementation can live where ever we want it to, but it needs some shared data. These are:</p>
<ul>
<li>The generated code by <code>protoc</code></li>
<li>The defined plugin interface</li>
<li>The GRPC Server and Client</li>
</ul>
<p>These need to be visible by both the Client and the Server. The Server here is the plugin. If you are planning on making people be able to extend your application with go-plugin, you should make these available as a separate SDK. So people won’t have to include your whole project just to implement an interface and use protoc. In fact, you could also extract the <code>protoc</code> definition into a separate repository so that your SDK can also pull it in. You will have three repositories:</p>
<ul>
<li>Your application;</li>
<li>The SDK providing the interface and the GRPC Server and Client implementation;</li>
<li>The protoc definition file and generated skeleton ( for Go based plugins).</li>
</ul>
<p>Other languages will have to generate their own protoc code, and includ it into the plugin; like the Python implementation example located here: <a target="_blank" rel="noopener" href="https://github.com/hashicorp/go-plugin/tree/master/examples/grpc/plugin-python">Go-plugin Python Example</a>. Also, read this documentation carefully: <a target="_blank" rel="noopener" href="https://github.com/hashicorp/go-plugin/blob/master/docs/guide-plugin-write-non-go.md">non-go go-plugin</a>. This document will also clarify what <code>1|1|tcp|127.0.0.1:1234|grpc</code> means and will dissipate the confusion around how plugins work. Lastly, if you would like to have an in-depth explanation about how go-plugin came to be, watch this video by Mitchell: <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=SRvm3zQQc1Q">go-plugin explanation video</a>. I must warn you though- it’s an hour long. But worth the watch!<br>That’s it. I hope this has helped to clear the confusion around how to use go-plugin.</p>
<p>Happy plugging!</p>
<p>Gergely.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/10/30/bigdata/tdengine/tdengine-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/bigdata/tdengine/tdengine-1/" class="post-title-link" itemprop="url">系统升级TDengine3.0</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-30 21:25:42" itemprop="dateCreated datePublished" datetime="2022-10-30T21:25:42+08:00">2022-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-31 11:22:29" itemprop="dateModified" datetime="2022-10-31T11:22:29+08:00">2022-10-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tdengine/" itemprop="url" rel="index"><span itemprop="name">tdengine</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tdengine/elasticsearch/" itemprop="url" rel="index"><span itemprop="name">elasticsearch</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>公司的一款产品是面向中小企业的内网安全日志采集与分析产品，使用Spring Boot &amp; Spring Cloud框架搭建，使用ElasticSearch进行存储，采用一体机的服务器（配置为4核CPU，32G，1T硬盘），使用CentOS7.8+Docker方式部署应用。</p>
<p>该产品的主要业务流程是，通过探针（探针会部署在多个工控机上）采集触发安全引擎的扫描，产生日志，之后探针采集这些日志并将其推送Kafka，平台端消费Kafka，解析和分析日志并存储到ElasticSearch，之后通过分析查询服务提供最终数据展示。</p>
<p>系统一直运行相对比较平稳，直到产品对日志增加了事件分组的要求，即当日志事件产生时，需要根据一定的规则判断是否当前日志与前一条日志是否未同一组事件。因为需要实时的判断事件的分组，在数据入库ES时，增加了大量的聚合运算。此时ES开始占用大量内存，整体响应慢，造成日志数据入库延时，和分析查询业务无法正常返回数据。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/10/30/bigdata/tdengine/tdengine-1/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/06/02/homework/129/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/02/homework/129/" class="post-title-link" itemprop="url">《原则2：应对变化中的世界秩序》读书笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-02 09:00:49" itemprop="dateCreated datePublished" datetime="2022-06-02T09:00:49+08:00">2022-06-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E5%8E%9F%E5%88%99/" itemprop="url" rel="index"><span itemprop="name">原则</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>4月定投课堂读书会的书目是《原则2：应对变化中的世界秩序》。知道如何应对我所不知道的东西。</p>
<h1 id="第一周"><a href="#第一周" class="headerlink" title="第一周"></a>第一周</h1><h2 id="在作者看来，三个最重要的周期分别是什么？"><a href="#在作者看来，三个最重要的周期分别是什么？" class="headerlink" title="在作者看来，三个最重要的周期分别是什么？"></a>在作者看来，三个最重要的周期分别是什么？</h2><p>长期债务和资本市场周期、内部秩序和混乱周期、外部秩序和混乱周期</p>
<h2 id="典型的大周期分为几个阶段？你所在的国家正处在哪个阶段？"><a href="#典型的大周期分为几个阶段？你所在的国家正处在哪个阶段？" class="headerlink" title="典型的大周期分为几个阶段？你所在的国家正处在哪个阶段？"></a>典型的大周期分为几个阶段？你所在的国家正处在哪个阶段？</h2><p>上升阶段、顶部阶段和下跌阶段。目前处于上升阶段阶段。</p>
<h2 id="三大周期、国家及其货币兴衰的3、5、8和18个决定因素是什么？"><a href="#三大周期、国家及其货币兴衰的3、5、8和18个决定因素是什么？" class="headerlink" title="三大周期、国家及其货币兴衰的3、5、8和18个决定因素是什么？"></a>三大周期、国家及其货币兴衰的3、5、8和18个决定因素是什么？</h2><p>3个决定因素：有利和不利的金融周期、内部秩序和混乱的周期、外部秩序和混乱周期</p>
<p>5个决定因素：有利和不利的金融周期、内部秩序和混乱的周期、外部秩序和混乱周期、创新和技术、天灾</p>
<p>8个决定因素：教育，竞争力，创新和技术、经济产出、世界贸易份额、军事实力、金融中心实力、储备货币地位。</p>
<p>18个决定因素：3大周期（经济大周期、内部秩序和混乱周期、外部秩序和混乱周期），8个实力指标（教育、创新和技术、成本竞争力、军事实力、贸易、经济产出、市场和金融中心、储备货币地位），7个额外因素（地质、资源分配效率、自然现象、基础设施和投资、品格/教养/决心，国家治理/法规，财富机会和价值观差距）</p>
<h2 id="长期债务周期包括几个阶段？各个阶段特点是什么？央行和政府在其中扮演着什么角色？思考为什么不应该依靠政府保护你的钱财？"><a href="#长期债务周期包括几个阶段？各个阶段特点是什么？央行和政府在其中扮演着什么角色？思考为什么不应该依靠政府保护你的钱财？" class="headerlink" title="长期债务周期包括几个阶段？各个阶段特点是什么？央行和政府在其中扮演着什么角色？思考为什么不应该依靠政府保护你的钱财？"></a>长期债务周期包括几个阶段？各个阶段特点是什么？央行和政府在其中扮演着什么角色？思考为什么不应该依靠政府保护你的钱财？</h2><p>6个阶段：</p>
<p>1.最初a）并不存在债务，或者债务很少，b）人们使用硬通货；</p>
<p>2.后来出现了硬通货债券票据；</p>
<p>3）后来是债务增加；</p>
<p>4）然后会发生债务危机、违约和货币贬值，导致印钞和与硬通货脱钩；</p>
<p>5）然后是法定货币，最终导致贬值；</p>
<p>6）回归硬通货。</p>
<p>大多数政府会滥用它们作为货币和信贷创造者与使用者的特权；没有任何一个决策者能够掌控整个长期债务周期。</p>
<h2 id="三种类型的货币体系分别是什么？彼此之间是如何转换的？"><a href="#三种类型的货币体系分别是什么？彼此之间是如何转换的？" class="headerlink" title="三种类型的货币体系分别是什么？彼此之间是如何转换的？"></a>三种类型的货币体系分别是什么？彼此之间是如何转换的？</h2><p>三种类型的货币体系是硬通货，纸币，法定货币。</p>
<p>当信誉度最大化，信贷创造最小化的时，从第一类（硬通货）转向第二类（纸币）。</p>
<p>当信贷创造扩大，信誉度下降时，从第二类（纸币）转向第三类（法定货币）。</p>
<p>当信贷创造最大化，信誉度最小化时，从第三类（法定货币）回归第一类（硬通货）。</p>
<h1 id="第二周"><a href="#第二周" class="headerlink" title="第二周"></a>第二周</h1><h2 id="所有货币都出现过贬值，货币贬值具有哪些共性？"><a href="#所有货币都出现过贬值，货币贬值具有哪些共性？" class="headerlink" title="所有货币都出现过贬值，货币贬值具有哪些共性？"></a>所有货币都出现过贬值，货币贬值具有哪些共性？</h2><ul>
<li>所有经济体出现过典型的挤兑现象，即央行发行的债券票据总额超过可提取的硬通货总额。</li>
<li>央行的的净储备在实际贬值前就已开始减少，在某些央行，甚至在货币贬值前几年就开始减少。</li>
<li>货币挤兑和贬值的出现通常伴随着严重的债务问题。</li>
<li>通常来说，央行最初的反应是，提高短期利率，但从经济角度看，这种做法过于痛苦，因此央行很快会放弃这种做法，转而增加货币供应。</li>
<li>不同国家的结果截然不同，一个重要变量是，该国在货币贬值是保存了多少经济和军事实力</li>
</ul>
<h2 id="作者发现，在大多数国家，虽然人们会在意识形态和宗教方面发生争斗，但影响大多数人的最重要因素是？"><a href="#作者发现，在大多数国家，虽然人们会在意识形态和宗教方面发生争斗，但影响大多数人的最重要因素是？" class="headerlink" title="作者发现，在大多数国家，虽然人们会在意识形态和宗教方面发生争斗，但影响大多数人的最重要因素是？"></a>作者发现，在大多数国家，虽然人们会在意识形态和宗教方面发生争斗，但影响大多数人的最重要因素是？</h2><p>影响大多数人的最主要因素是人们如何创造、获取和分配财富与权力。</p>
<h2 id="内部秩序和混乱大周期包括几个阶段？哪些信号表明美国处于第五个阶段（财政状况糟糕、冲突激烈）？"><a href="#内部秩序和混乱大周期包括几个阶段？哪些信号表明美国处于第五个阶段（财政状况糟糕、冲突激烈）？" class="headerlink" title="内部秩序和混乱大周期包括几个阶段？哪些信号表明美国处于第五个阶段（财政状况糟糕、冲突激烈）？"></a>内部秩序和混乱大周期包括几个阶段？哪些信号表明美国处于第五个阶段（财政状况糟糕、冲突激烈）？</h2><p>第一阶段，新秩序开始，新领导巩固权力</p>
<p>第二阶段，资源配置体系与政府官僚机构建立和完善。</p>
<p>第三阶段，出现和平与繁荣。</p>
<p>第四阶段，支出和债务严重过度，贫富差距和政治分歧扩大。</p>
<p>第五阶段，财政状况糟糕，冲突激烈</p>
<p>第六阶段，出现内战/革命。</p>
<p>在今天的美国，联邦政府及许多州和城市的政府面临着巨额赤字、巨额债务和巨大的贫富差距，美联储正在大规模增印货币，购买大量联邦政府债券，为联邦政府支出提供资金，而目前联邦政府的支出远大于收入。</p>
<h2 id="外部秩序变化背后的永恒普适力量是什么？"><a href="#外部秩序变化背后的永恒普适力量是什么？" class="headerlink" title="外部秩序变化背后的永恒普适力量是什么？"></a>外部秩序变化背后的永恒普适力量是什么？</h2><p>国内实力和军事实力密切相关。</p>
<p>在财力上超过对手是一个国家能够拥有的最大优势之一。</p>
<p>在以下两种情况下，爆发军事战争的风险最大：1）双方的军事实力旗鼓相当，2）双方在生存问题上存在不可调和的分歧。</p>
<p>要想获取更多的双赢结果，双方必须进行良好的协商，既考虑到对方也考虑到自身的优先关注点，并懂得妥善的在二者之间进行权衡。</p>
<p>获胜意味着在不失去最重要的东西的前提下，得到最重要的东西。所以，如果丧失的生命和金钱超过带来的益处，这样的战争就是愚蠢的。</p>
<p>获取权力，尊重权利，并明智的运用权力。</p>
<h2 id="从投资者的角度来看大周期的整体格局，大多数投资者面临的三大风险是什么？"><a href="#从投资者的角度来看大周期的整体格局，大多数投资者面临的三大风险是什么？" class="headerlink" title="从投资者的角度来看大周期的整体格局，大多数投资者面临的三大风险是什么？"></a>从投资者的角度来看大周期的整体格局，大多数投资者面临的三大风险是什么？</h2><p>大多数投资者面临的三大风险是，投资组合将无法提供支出所需的回报，投资组合将面临破产，以及很大一部分财富会被收走。</p>
<h1 id="第三周"><a href="#第三周" class="headerlink" title="第三周"></a>第三周</h1><h2 id="荷兰帝国兴起的过程中，两个最重要的发明是什么？为何衰退？"><a href="#荷兰帝国兴起的过程中，两个最重要的发明是什么？为何衰退？" class="headerlink" title="荷兰帝国兴起的过程中，两个最重要的发明是什么？为何衰退？"></a>荷兰帝国兴起的过程中，两个最重要的发明是什么？为何衰退？</h2><p>荷兰人的两个最重要的发明是：1）效能及其优异的帆船，使他们能在世界各地航行，这一点再加上他们从欧洲战事中获得的军事能力，使他们能收集巨大的财富；2）为这些行动提供推动力的资本主义。</p>
<p>负债过多，国内发生许多财富争斗，军事实力衰落，受到英国的挑战，荷兰盾贬值，失去储备货币地位。</p>
<h2 id="大英帝国是如何取代荷兰帝国，成为新兴帝国的？如何衰退？"><a href="#大英帝国是如何取代荷兰帝国，成为新兴帝国的？如何衰退？" class="headerlink" title="大英帝国是如何取代荷兰帝国，成为新兴帝国的？如何衰退？"></a>大英帝国是如何取代荷兰帝国，成为新兴帝国的？如何衰退？</h2><p>对法制的尊重，有力的教育，为英国在商业和创新方面取得竞争优势奠定了基础。受过良好教育的人口，重视发明创造的文化，新想法的发展能够得到资本的经济支持，这些因素创造了一大波竞争力提升与繁荣。英国的军事实力，特别是海军、帮助它建立殖民地，多去其他欧洲国家的殖民地，并确保对全球贸易路线的控制。伦敦成为世界金融中心，英镑成为世界储备货币。</p>
<p>竞争力下降，不平等和冲突加剧，新的竞争对手崛起，特别是德国和美国。二战后英国背负沉重债务，维持帝国的代价高于盈利，英镑贬值，失去国际储备货币地位。</p>
<h2 id="美帝国是如何兴起并走向顶峰取代大英帝国，成为新兴帝国的？"><a href="#美帝国是如何兴起并走向顶峰取代大英帝国，成为新兴帝国的？" class="headerlink" title="美帝国是如何兴起并走向顶峰取代大英帝国，成为新兴帝国的？"></a>美帝国是如何兴起并走向顶峰取代大英帝国，成为新兴帝国的？</h2><p>美国通过革命建立了一个新的国内秩序，第二次工业革命创造了收入、技术和财富的巨大收益。二次世界大战美国都是大赢家。</p>
<h2 id="美国在自身大周期中所处的位置是？哪些典型的标志和信号？"><a href="#美国在自身大周期中所处的位置是？哪些典型的标志和信号？" class="headerlink" title="美国在自身大周期中所处的位置是？哪些典型的标志和信号？"></a>美国在自身大周期中所处的位置是？哪些典型的标志和信号？</h2><p>作者分析美国在自身大周期中处于第五阶段（约处于大周期70%的位置，误差范围为10个百分点）。</p>
<p>三个重要的标志：1）规则被无视，2）双方相互的情绪化攻击，3）发生流血事件。</p>
<h2 id="为什么帝国的衰退不可避免？（无论荷兰、英国还是美国）"><a href="#为什么帝国的衰退不可避免？（无论荷兰、英国还是美国）" class="headerlink" title="为什么帝国的衰退不可避免？（无论荷兰、英国还是美国）"></a>为什么帝国的衰退不可避免？（无论荷兰、英国还是美国）</h2><p>让帝国强大的力量减弱，敌对力量出现。</p>
<h1 id="第四周"><a href="#第四周" class="headerlink" title="第四周"></a>第四周</h1><h2 id="从1949到现在的崛起，可以把中国发展分为几个阶段？"><a href="#从1949到现在的崛起，可以把中国发展分为几个阶段？" class="headerlink" title="从1949到现在的崛起，可以把中国发展分为几个阶段？"></a>从1949到现在的崛起，可以把中国发展分为几个阶段？</h2><p>可以分为三个阶段，1949～1976，1978～2008，2008年至今</p>
<h2 id="中美关系为何从共生关系走向冲突？"><a href="#中美关系为何从共生关系走向冲突？" class="headerlink" title="中美关系为何从共生关系走向冲突？"></a>中美关系为何从共生关系走向冲突？</h2><p>美国由债务增长支撑的繁荣时期引发了债务泡沫，造成贫富差距，中国实力不断加强，两国从互惠互利的关系变成激烈的竞争关系，冲突加剧。</p>
<h2 id="美国和中国的现状分别是？有几种类型的战争？"><a href="#美国和中国的现状分别是？有几种类型的战争？" class="headerlink" title="美国和中国的现状分别是？有几种类型的战争？"></a>美国和中国的现状分别是？有几种类型的战争？</h2><p>因为打周期的规律，美国正在衰弱（周期的第五阶段），中国正在崛起（周期的第三阶段）。</p>
<p>有七大类型的战争：1）贸易/经济战；2）技术战；3）地缘政治战；4）资本战；5）军事战；6）文化战；7）自我交战的战争</p>
<h2 id="作者对于未来的观点是基于作者对进化、周期、指标三点的想法，分别是？"><a href="#作者对于未来的观点是基于作者对进化、周期、指标三点的想法，分别是？" class="headerlink" title="作者对于未来的观点是基于作者对进化、周期、指标三点的想法，分别是？"></a>作者对于未来的观点是基于作者对进化、周期、指标三点的想法，分别是？</h2><p>人类的创造性可能会带来更大的进步，但同时债务/经济周期、内部秩序和混乱周期、外部秩序和混乱周期与不断恶化的自然灾害，几乎可以肯定会构成问题。换言之，人类的创造性和这些其他挑战，将存在一场斗争。</p>
<p>各国内部和各国之间情况极为不同，这将决定哪些国家将以何种方式崛起，哪些国家将以何种方式衰弱。</p>
<h2 id="基于对过去的分析和未来的预测，达利欧建议应该如何应对已知和未知？有哪几条原则？"><a href="#基于对过去的分析和未来的预测，达利欧建议应该如何应对已知和未知？有哪几条原则？" class="headerlink" title="基于对过去的分析和未来的预测，达利欧建议应该如何应对已知和未知？有哪几条原则？"></a>基于对过去的分析和未来的预测，达利欧建议应该如何应对已知和未知？有哪几条原则？</h2><p>了解所有的可能性，考虑最坏的情况，然后想办法消除无法忍受的情况。</p>
<p>分散风险。</p>
<p>首先考虑延迟满足而不是当下满足，这样你将来会过得更好。</p>
<p>与最聪明的人反复沟通。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/05/01/homework/128/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/01/homework/128/" class="post-title-link" itemprop="url">《原则》读书笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-01 10:36:09" itemprop="dateCreated datePublished" datetime="2022-05-01T10:36:09+08:00">2022-05-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E5%8E%9F%E5%88%99/" itemprop="url" rel="index"><span itemprop="name">原则</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>4月定投课堂读书会的书目是《原则》。由自己决定希望从生活中得到什么和给予什么。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/01/homework/128/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/04/01/homework/127/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/01/homework/127/" class="post-title-link" itemprop="url">《文明 现代化 价值投资与中国》读书笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-01 20:35:02" itemprop="dateCreated datePublished" datetime="2022-04-01T20:35:02+08:00">2022-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E4%BB%B7%E5%80%BC%E6%8A%95%E8%B5%84/" itemprop="url" rel="index"><span itemprop="name">价值投资</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>3月定投课堂读书会的书目是《文明 现代化 价值投资与中国》。价值投资理论不难，但真正做到的人不多，如果你能做到的话能就是世界前5%的人。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/04/01/homework/127/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/03/04/homework/126/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/04/homework/126/" class="post-title-link" itemprop="url">《定投改变命运》读书笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-04 21:23:19" itemprop="dateCreated datePublished" datetime="2022-03-04T21:23:19+08:00">2022-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E5%AE%9A%E6%8A%95/" itemprop="url" rel="index"><span itemprop="name">定投</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E5%AE%9A%E6%8A%95/%E5%AE%9A%E6%8A%95%E6%94%B9%E5%8F%98%E5%91%BD%E8%BF%90/" itemprop="url" rel="index"><span itemprop="name">定投改变命运</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2月定投课堂读书会的书目是《定投改变命运》的中英文版本。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/03/04/homework/126/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/02/12/git/git-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/12/git/git-2/" class="post-title-link" itemprop="url">免密登录GitHub</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-12 12:43:06" itemprop="dateCreated datePublished" datetime="2022-02-12T12:43:06+08:00">2022-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/GitHub/" itemprop="url" rel="index"><span itemprop="name">GitHub</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/GitHub/ssh/" itemprop="url" rel="index"><span itemprop="name">ssh</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>本文算是对「<a href="http://l4qiang.me/2018/09/19/git/git-1/">管理多个Github帐号</a>」的重新整理，在查看该文档重新配置GitHub免密登录时，发现不是很顺畅，于是按步骤的方式进行重新整理。而「管理多个Github账号」是对配置多个GitHub不成的问题分析。</p>
<p>本文基于macOS Monterey（v12.0.1）环境，不同版本可能会有所差异。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/02/12/git/git-2/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/02/12/homework/125/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/12/homework/125/" class="post-title-link" itemprop="url">写作课作业-125</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-12 10:56:11" itemprop="dateCreated datePublished" datetime="2022-02-12T10:56:11+08:00">2022-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index"><span itemprop="name">开发环境</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>本文主要记录MacBookPro M1的安装全新开发环境的过程，对于可直接下载安装的软件，如无特殊情况需要说明的只列出软件名称。</p>
<p>参考少数派文章<a target="_blank" rel="noopener" href="https://sspai.com/post/66754">Mac 新手想知道 02：更高效地操作桌面和窗口</a>，做基础设置。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/02/12/homework/125/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/01/28/homework/124/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/28/homework/124/" class="post-title-link" itemprop="url">写作课作业-124</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-28 17:32:46" itemprop="dateCreated datePublished" datetime="2022-01-28T17:32:46+08:00">2022-01-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E7%B1%BB%E6%AF%94%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">类比小程序</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>712</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>上帝说要有光，于是便有了光。</p>
<p>笑来老师说每个精彩的类比都是一笔财富，于是便有个这个小程序。</p>
<p>当我们正确使用类比，从已知通向未知，类比的作用是巨大的。当我们滥用类比，错误理解了新事物，危害是巨大的。这是我设计小程序Logo<code>&gt;≈&lt;</code>的想法。类比是约等于，不是等于号，但有时是大于号，有时是小于号，就看使用是否恰当。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/01/28/homework/124/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://l4qiang.me/2022/01/01/homework/123/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="L4qiang">
      <meta itemprop="description" content="记录点滴，注重积累。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CrazyAirhead">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/01/homework/123/" class="post-title-link" itemprop="url">写作课作业-123</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-01 21:04:05" itemprop="dateCreated datePublished" datetime="2022-01-01T21:04:05+08:00">2022-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 21:23:05" itemprop="dateModified" datetime="2022-10-30T21:23:05+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">写作</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%86%99%E4%BD%9C/%E4%BD%9C%E4%B8%9A/%E8%96%84%E4%B8%96%E5%AE%81%E5%8C%BB%E5%AD%A6%E9%80%9A%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">薄世宁医学通识</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天抽时间总算把《薄世宁医学通识讲义》读完。书中的一些医疗的发展历史，在《医学大神》这套书中有所讲解，推荐看看，既能了解历史而且故事性很强很容易读。对医疗过程，医疗结果和医疗意义的部分补充，如果自己还在从事医疗信息化的开发应该是有帮助的，于是推荐给了之前的同事，希望他也看看。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/01/01/homework/123/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">L4qiang</p>
  <div class="site-description" itemprop="description">记录点滴，注重积累。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">257</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">110</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">110</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/crazy-airhead" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;crazy-airhead" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:L4qiang@gmail.com" title="E-Mail → mailto:L4qiang@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/enderjo" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;enderjo" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://ri.cms.firesbox.com/" title="https:&#x2F;&#x2F;ri.cms.firesbox.com" rel="noopener" target="_blank">践行群官方情报站</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">L4qiang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">552k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">8:22</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">
  

  


    </div>
</body>
</html>
